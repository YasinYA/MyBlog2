angular.module("MyBlog",["ui.router","ngResource","yaru22.angular-timeago"]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(t,e,o){e.otherwise("/"),t.state("home",{url:"/",views:{nav:{templateUrl:"views/homeNav.html"},content:{templateUrl:"views/welcome.html"}}}).state("admin",{url:"/admin",views:{content:{templateUrl:"../../admin.html",controller:"LoginController"}}}).state("userPosts",{url:"/userposts",views:{nav:{templateUrl:"views/homeNav.html"},content:{templateUrl:"views/userPosts.html",controller:"PostsController"}}}).state("more",{url:"/more/:id",views:{nav:{templateUrl:"views/homeNav.html"},content:{templateUrl:"views/more.html",controller:"PostsController"}}}).state("about",{url:"/about",views:{nav:{templateUrl:"views/homeNav.html"},content:{templateUrl:"views/aboutMe.html"}}}).state("dashboard",{url:"/dashboard",views:{nav:{templateUrl:"views/dashboardNav.html"},content:{templateUrl:"../../dashboard.html",controller:"DashboardController"}},onEnter:["$http","$state",function(t,e){t.get("/api/dashboard").then(function(t){"Authorized"===t.data.success?e.go("dashboard"):e.go("admin")})}]}).state("posts",{url:"/posts",views:{nav:{templateUrl:"views/dashboardNav.html"},content:{templateUrl:"views/posts.html",controller:"PostsController"}}}).state("add",{url:"/add",views:{nav:{templateUrl:"views/dashboardNav.html"},content:{templateUrl:"views/newPost.html",controller:"AddPostController"}}}).state("edit",{url:"/edit/:id",views:{nav:{templateUrl:"views/dashboardNav.html"},content:{templateUrl:"views/edit.html",controller:"EditRemoveController"}}}).state("single",{url:"/single/:id",views:{nav:{templateUrl:"views/dashboardNav.html"},content:{templateUrl:"views/singlePost.html",controller:"PostsController"}}}).state("activities",{url:"/activities",views:{nav:{templateUrl:"views/dashboardNav.html"},content:{templateUrl:"views/activities.html",controller:"PostsController"}}}),o.html5Mode(!0)}]).run(["$rootScope","$state","$stateParams",function(t,e,o){t.$state=e,t.$stateParams=o}]),angular.module("MyBlog").factory("Login",["$http",function(t){var e={};return e.postCredential=function(o){t.post("/api/admin",o).success(function(t){window.location.href="/dashboard"}).error(function(t){e.message="Invalid User",e.show=!0})},e}]).factory("Dashboard",["$http",function(t){var e={};return e.checkauthorization=function(){t.get("/api/dashboard").success(function(t){return e.message=t.success})},e}]).factory("Posts",["$resource",function(t){return t("/api/posts",{query:{method:"GET",isArray:!0},save:{method:"POST",url:"/api/posts"}})}]).factory("Post",["$resource",function(t){return t("/api/post/:id",null,{query:{method:"GET",params:{id:"@_id"},isArray:!0},update:{method:"PUT",params:{id:"@_id"}},"delete":{method:"DELETE",params:{id:"@_id"}}})}]).factory("Comments",["$resource",function(t){return t("/api/comments",{query:{method:"GET",isArray:!0},save:{method:"POST",params:{id:"@_id"}}})}]).factory("Likes",["$resource",function(t){return t("/api/likes",{save:{method:"POST"}})}]).factory("SinglePostLikes",["$http","$stateParams",function(t,e){var o={};return o.getlikes=function(o,s){return"true"===s?t.get("/api/postlikes/"+e.id):"false"===s?t.get("/api/postlikes/"+o):void 0},o}]).factory("SinglePostComments",["$http",function(t){var e={};return e.getComments=function(e){return t.get("/api/comments/"+e)},e}]),angular.module("MyBlog").controller("LoginController",["$scope","Login",function(t,e){t.LoginHandler=function(){t.logUser={username:t.username,password:t.password},t.login=e.postCredential(t.logUser),t.message=e.message,t.show=e.show}}]).controller("DashboardController",["$scope","Dashboard",function(t,e){t.message="hello world this is dashboard"}]).controller("PostsController",["$scope","Posts","Post","Likes","Comments","$stateParams",function(t,e,o,s,n,r){t.getPosts=function(){t.posts=e.query()},t.getSingle=function(){t.singlePost=o.get({id:r.id})},t.like=0,t.liker=function(e){t.like++,t.newLike={postId:e,likes:t.like},t.postLike=s.save(t.newLike,function(){window.location.reload()})},t.getComments=function(){t.comments=n.query(),t.arr=[],t.comments.$promise.then(function(e){e.forEach(function(e){r.id===e.postId&&t.arr.push(e)})})},t.addComment=function(){t.comment={name:t.name,email:t.email,postId:r.id,body:t.body,image:"https://cdn1.iconfinder.com/data/icons/photography-2/512/YPS__human_avatar_portrait_photography_picture_photo-512.png"};r.id;t.commentPost=n.save({id:r.id},t.comment,function(){window.location.reload()})},t.removePost=function(){t.remove=o["delete"]({id:r.id},function(){window.location.href="/#/posts"})}}]).controller("AddPostController",["$scope","Posts",function(t,e){t.addNewPost=function(){var o={title:t.title,author:t.author,image:t.image,category:t.category,likes:t.likes,content:t.content};t.addPost=e.save(o,function(){window.location.href="/#/posts"})}}]).controller("EditRemoveController",["$scope","Post","$stateParams",function(t,e,o){t.getSinglePost=function(){t.singlePost=e.get({id:o.id})},t.editPost=function(){var s={title:t.singlePost.title,author:t.singlePost.author,image:t.singlePost.image,category:t.singlePost.category,content:t.singlePost.content};t.editPost=e.update({id:o.id},s,function(){var t=o.id;window.location.href="/#/single/"+t})}}]),angular.module("MyBlog").filter("labelCase",function(){return function(t){return t.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})}}),angular.module("MyBlog").directive("drLikes",["SinglePostLikes",function(t){return{scope:{},restrict:"E",templateUrl:"../views/directives/likes.html",link:function(e,o,s){e.postlike=t.getlikes(s.id,s.separate),e.postlike.success(function(t){e.postlikes=t})}}}]).directive("drComments",["SinglePostComments",function(t){return{scope:{},restrict:"E",templateUrl:"../views/directives/comments.html",link:function(e,o,s){e.SinglepostComment=t.getComments(s.id),e.SinglepostComment.success(function(t){e.SinglepostComments=t})}}}]).directive("sideBar",["Posts",function(t){return{scope:{},restrict:"EA",templateUrl:"../views/directives/sidebar.html",link:function(e,o,s){e.shower=s.showing,"true"===e.shower&&(e.recentPosts=t.query())}}}]);
//# sourceMappingURL=../maps/app.min.js.map
